{% comment %} {% extends 'Dashboard/dashboard.html' %} {% endcomment %}
{% load static %}


<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Foodies{% endblock %}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet" />
  <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head> 

<body>
{% block content %}
<br><br><br>
{% if messages %}
    <ul class="messages">
        {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}

{% comment %} Create Item {% endcomment %}
<div class="form-container">
<div class="modal fade" id="modalContactForm" tabindex="-1" role="dialog" aria-labelledby="modalTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header text-center">
          <h4 class="modal-title w-100 font-weight-bold">ADD ITEM</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body mx-3">
          <form method="post" enctype="multipart/form-data" >
            {% csrf_token %}
          <div class="form-group">
            <label for="itemname">Name</label>
            <input class="form-control" type="text" name="itemname" id="itemname" placeholder="Enter Name">
          </div>
          <div class="form-group">
            <label for="image">Image</label>
            <input class="form-control" type="file" name="image" accept="image/*" id="image">
          </div>
          <div class="form-group">
            <label for="price">Price</label>
            <input class="form-control" type="number" name="price" id="price" placeholder="Enter Price">
          </div>
          <div class="form-group">
            <label for="category">Category</label>
            <select class="form-control" name="category" id="category">
              <option value="Breakfast">Breakfast</option>
              <option value="Lunch">Lunch</option>
              <option value="Dinner">Dinner</option>
              <option value="Chatts">Chatts</option>
              <option value="Beverage">Beverage</option>
            </select>
          </div>
          <div class="form-group">
            <label for="description">Description</label>
            <textarea class="form-control" name="description" rows="5" cols="30" placeholder="Enter Description"></textarea>
          </div>
        </div>
        <div class="modal-footer d-flex justify-content-center">
          <button class="btn btn-unique">Submit</button>
        </div>
      </form>
      </div>
    </div>
  </div>
</div>
  <div class="text-center">
    <a href="{% url 'dashboard' %}" class="btn btn-default btn-rounded mb-4 float-end me-4 bg-dark text-white">Cancel</a>
    <a href="" class="btn btn-default btn-rounded mb-4 float-end me-4 bg-success text-white" data-toggle="modal" data-target="#modalContactForm">Create Item</a>
  </div>
  <header class="projects-header">
    <div class="title text-dark fs-1">Today's Menu</div>
</header>
  
  {% comment %} itemlist {% endcomment %}
  <div class="tablecontainer mx-auto">
        <div class="projects mb-4">
          <div class="projects-inner">
                <div class="tablecontainer mx-auto">
                  <div class="table-responsive">
                      <table class="table ">
                          <thead>
                              <tr>
                                  <th>Id</th>
                                  <th>Name</th>
                                  <th>Image</th>
                                  <th class="px-2">Price</th>
                                  <th>Description</th>
                                  <th>Category</th>
                                  <th>Action</th>
                              </tr>
                          </thead>
                          <tbody id="myTable">
                              {% for item in menu_items  %}
                              <tr>
                                  <th>{{ item.item_id }}</th>
                                  <th>{{ item.itemname }}</th>
                                  <th><img src="{{ item.image.url }}" alt="{{ item.itemname }}" width="100"></th>
                                  <th class="px-2">{{ item.price }}</th>
                                  <td class="text-truncate"style="max-width: 10px;">{{ item.description }}</td>
                                  <th>{{ item.category }}</th>
                                 
                                  <td>
                                    <a href="{% url 'update_item' item_id=item.item_id %}" class="" data-toggle="tooltip" data-placement="top" title="Update"><i class="fa-solid fa-pen-to-square"></i></a>
                                    <a href="{% url 'delete_item' item_id=item.item_id %}" class="text-danger" data-toggle="tooltip" data-placement="top" title="Delete"><i class="fas fa-trash-alt"></i></a>
                                  </td>
                              </tr>   
                              {% endfor %}        
                          </tbody>
      
                      </table>
                      {% comment %} <nav style="background-color: white;" aria-label="Page navigation example" id="pagination">
                          <ul class="pagination">
                              <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                              <li class="page-item"><a class="page-link" href="#">1</a></li>
                              <li class="page-item"><a class="page-link" href="#">2</a></li>
                              <li class="page-item"><a class="page-link" href="#">3</a></li>
                              <li class="page-item"><a class="page-link" href="#">Next</a></li>
                          </ul>
                      </nav> {% endcomment %}
                  </div>
              </div>
            </div>
  {% endblock %}

            <script>const myModal = document.getElementById('myModal')
                const myInput = document.getElementById('myInput')
                
                myModal.addEventListener('shown.bs.modal', () => {
                  myInput.focus()
                })
            </script>
        </body> 
